# gear-mesh-cli project configuration

type: 'application'
language: 'rust'
tags: ['rust', 'cli']

project:
  name: 'gear-mesh-cli'
  description: 'Command-line interface for GearMesh'
  owner: 'UtakataKyosui'
  maintainers: ['UtakataKyosui']

fileGroups:
  sources:
    - 'src/**/*'
    - 'Cargo.toml'
  tests:
    - 'src/**/*'

tasks:
  build:
    command: 'cargo build --package gear-mesh-cli'
    inputs:
      - '@group(sources)'
    outputs:
      - 'target/debug/gear-mesh-cli'
    deps:
      - 'gear-mesh-generator:build'
    options:
      cache: true
      runInCI: true

  build-release:
    command: 'cargo build --package gear-mesh-cli --release'
    inputs:
      - '@group(sources)'
    outputs:
      - 'target/release/gear-mesh-cli'
    deps:
      - 'gear-mesh-generator:build'
    options:
      cache: true
      runInCI: false

  test:
    command: 'cargo test --package gear-mesh-cli'
    inputs:
      - '@group(tests)'
    deps:
      - '~:build'
    options:
      cache: true
      runInCI: true

  lint:
    command: 'cargo clippy --package gear-mesh-cli --all-targets --all-features -- -D warnings'
    inputs:
      - '@group(sources)'
    options:
      cache: true
      runInCI: true

  format:
    command: 'cargo fmt --package gear-mesh-cli -- --check'
    inputs:
      - '@group(sources)'
    options:
      cache: true
      runInCI: true

  doc:
    command: 'cargo doc --package gear-mesh-cli --no-deps'
    inputs:
      - '@group(sources)'
    outputs:
      - 'target/doc/gear_mesh_cli/**/*'
    options:
      cache: true
      runInCI: false
